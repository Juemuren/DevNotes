# 环境管理

## 基本概念

环境管理器这个概念可能你没听说过，因为这或许是一个我生造的词语 ~~用中/英文搜 *环境管理* 出来的都是些跟环境保护有关的文章~~ 。

## 分类

我对**环境管理器**的定义是提供了多种环境，或能对环境进行操作的工具。

### 操作环境

- [Conda](Conda.md) 管理多种语言的运行环境，可以激活、修改、创建、删除环境
- [Mise](Mise.md) 管理开发环境的工具，包括管理工具链版本、切换环境、运行任务等功能。

### 提供环境

- [MSYS](MSYS.md) 提供了符合 POSIX 标准的编程环境。
- [WSL](WSL.md) 提供了原生而非移植的 Linux 环境。
- [Docker](Docker.md) 容器也提供了环境，可以直接在容器中开发，省去了所有配置开发环境的麻烦。

## 选择

环境管理是一个很麻烦的事情，因此有了很多很多的工具。而工具多了又出现了新的问题：选择哪个工具呢？对于我而言，我目前遵循这样的实践

- **科学计算** 使用 Conda 管理环境。科学计算项目是 *混合栈* 的典型。一个 *Python* 的库可能要调用 *R* 脚本，而脚本底层又可能要用 *C++* 加速，并且可能依赖特定 *CUDA* 版本的运行时。早期 Conda 对于这种多语言混合环境是处理的最好的。尽管目前 pip 等工具已经有所改善，但使用 Conda 成为了这个领域的惯性。
- **网站开发** 使用 Mise 管理环境。Web 项目往往是 *多运行时并列* 且 *依赖相对独立*，而 Mise 的理念是非常适合 Web 项目。Mise 有一个清单文件用来说明项目需要的运行时版本，并且可以根据这个文件自动使用该版本的运行时，避免出错。
- **系统编程** 使用 MSYS/WSL 管理环境。对于 C/C++ 这样的语言，由于有交叉编译的需求，要求能够对编译环境进行操作，而对此 MSYS/WSL 都挺不错。并且由于 C/C++ 历史包袱太严重，系统包管理器在某些时候充当了语言包管理器，因此 MSYS/WSL 这样有个系统级的包管理器在某些时候还是很方便的。
- **特殊情况** 对于部分特殊情况，比如没有好的工具可以管理，或者生态很全面高度一体化（比如 .NET），我通常会使用官方的工具。

当然了，上述没有提到以 Docker 为代表的容器工具。我不是很喜欢容器技术，因为在 Windows 上使用起来不怎么舒服，但它确实很方便。上述所有环境配置都可以使用容器完成，不过前提就是得有人提供了容器的镜像。毕竟复杂度不会消失，只能转移，如果没有人帮你承受这些复杂度，那么你仍要自己面对环境配置这个恐怖的东西。因此，尽管容器大概率就是环境管理的终极武器，但我平时还是会使用各种环境管理工具。
